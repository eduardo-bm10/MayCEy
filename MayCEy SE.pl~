%Base de conocimiento
%Lista de avio
aviones_pequenos([cessna, beechcraft,embraerphenom]).
aviones_medianos([boing717,embraer190,airbusA220]).
aviones_grandes([boing747,airbusA340,airbusA380]).
pistas([p1,p2-1,p2-2,p3]).
clave_emergencia([mayday,[perdida,de,motor],parto,[paro,cardiaco],secuestro]).
ocupada(p1,[7,10,12,15]).
ocupada(p2-1,[9,11,13,17]).
ocupada(p2-2,[7,13,14,16]).
ocupada(p3,[10,14,16,18]).

direccion(p2-1,este_oeste).
direccion(p2-2,oeste_este).

%puede_aterrizar():-es_emergencia(F).

puede_aterrizar(A,P):-consultar_avion(A,pequeño),P='p1'.
puede_aterrizar(A,P):-consultar_avion(A,mediano),P='p2-1'.
puede_aterrizar(A,P):-consultar_avion(A,mediano),P='p2-2'.
puede_aterrizar(A,P):-consultar_avion(A,grande),P='p3'.

puede_aterrizar(A,P,H):-consultar_avion(A,pequeño),P='p2-1',!,not(esta_ocupada(P,H)),P0='p1',esta_ocupada(P0,H).
puede_aterrizar(A,P,H):-consultar_avion(A,pequeño),P='p2-2',!,not(esta_ocupada(P,H)),P0='p1',esta_ocupada(P0,H).
puede_aterrizar(A,P,H):-consultar_avion(A,mediano),P='p3',!,not(esta_ocupada(P,H)),P0='p2-1',esta_ocupada(P0,H).
puede_aterrizar(A,P,H):-consultar_avion(A,mediano),P='p3',!,not(esta_ocupada(P,H)),P0='p2-2',esta_ocupada(P0,H).

puede_despegar(A,P,H):-consultar_avion(A,pequeño),consultar_pista(P),!,not(esta_ocupada(P,H)).
puede_despegar(A,P,H):-consultar_avion(A,grande),consultar_pista(P),!,not(esta_ocupada(P,H)).
puede_despegar(A,P,H,Dir):-consultar_avion(A,mediano),direccion(P,Dir),!,not(esta_ocupada(P,H)).
puede_despegar(A,P,H,Dir):-consultar_avion(A,mediano),direccion(P,Dir),!,not(esta_ocupada(P,H)).

consultar_avion(A,T):-aviones_pequenos(L),T='pequeño',miembro(A,L).
consultar_avion(A,T):-aviones_medianos(L),T='mediano',miembro(A,L).
consultar_avion(A,T):-aviones_grandes(L),T='grande',miembro(A,L).

consultar_pista(P):-pistas(L),miembro(P,L).
esta_ocupada(P,H):-ocupada(P,LH),miembro(H,LH).

detectar_clave(X):-clave_emergencia(L),miembro(X,L).
es_emergencia(L1):-miembro(X,L1),detectar_clave(X).

hora_de_aterrizaje(0,0,H,H).
hora_de_aterrizaje(Vel,Dis,Hora1,HoraX):-hora_de_aterrizaje(0,0,HoraX,HoraX),HoraX is (Vel*Hora1-Dis)/(Vel).

miembro(X,[X|_]).
miembro(X,[_|T]):-miembro(X,T).




